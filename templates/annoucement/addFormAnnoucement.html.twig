{% extends 'home/template.html.twig' %}

{% block title %}Hello AnnoucementController!
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>

	<div class="example-wrapper">
		<h1>
			Ajout d'annonce
		</h1>

		{{ form_start(form) }}
		{{ form_widget(form) }}
		{#{% endfor %}#}
		{#{% for annoucement in annoucements %}
																																																																																																																																																																																																																																																																																																																																																				{{ form_row(annoucement.fourht) }}
																					{#{{ form_row(form.Image) }}#}
		<input type="submit" value="Create"/> {{ form_end(form) }}
		<div class="col-3">
			<div class="card" style="width: 18rem;"></div>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script>
		// window.onload = () => { // On va chercher la région

$(document).on('change', '#add_annoucement_regions, #add_annoucement_departement_id', function () {
let $field = $(this)
let $regionField = $('#add_annoucement_regions')
let $form = $field.closest('form')
let target = '#' + $field.attr('id').replace('departement_id', 'villesfrance_id').replace('regions', 'departement_id')
// Les données à envoyer en Ajax
let data = {}
data[$regionField.attr('name')] = $regionField.val()
data[$field.attr('name')] = $field.val()
// On soumet les données
$.post($form.attr('action'), data).then(function (data) { // On récupère le nouveau <select>
let $input = $(data).find(target)
// On remplace notre <select> actuel
$(target).replaceWith($input)
})
})
// }
// }

	</script>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
{% endblock %}
