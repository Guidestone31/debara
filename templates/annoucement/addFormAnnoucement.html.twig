{% extends 'home/template.html.twig' %}

{% block title %}Hello AnnoucementController!
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>

	<div class="example-wrapper">
		<h1>
			Ajout d'annonce
		</h1>

		{{ form_start(form) }}
		{#{% for annoucement in annoucements %}
						{{ form_row(form.anoucement.Name) }}
						{{ form_row(annoucement.second) }}
						{{ form_row(annoucement.fourht) }}
						{% endfor %}#}
		{#{{ form_row(form.Image) }}#}
		{{ form_end(form) }}
			<div class="col-3"> <div class="card" style="width: 18rem;"></div>
		</div>
	</div>
{% endblock %}
{% block javascripts %}

	<script>
		window.onload = () => { // On va chercher la rÃ©gion
let region = document.querySelector("#add_annoucement_regions");

region.addEventListener("change", function () {

let form = this.closest("form");
console.log(form);
let data = this.name + "=" + this.value;
console.log(data + " data");

fetch(form.action, {
method: form.getAttribute("method"),
body: data,
headers: {
"Content-Type": "application/x-www-form-urlencoded; charset=UTF-8"
}
}).then(response => response.text()).then((html) => {
console.log(html + " 1er html")
let content = document.createElement("html");
content.innerHTML = html;
console.log(html + "2eme html")
let nouveauSelect = content.querySelector("#add_annoucement_departements");
console.log(nouveauSelect + " Nouveau select");
document.querySelector("#add_annoucement_departements").replaceWith(nouveauSelect);
})

});


}
	</script>
{% endblock %}
